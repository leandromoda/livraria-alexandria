NLIBRARY_BASE_URL}{work_key}/editions.json?limit=5\"\n    res = requests.get(url)\n\n    if res.status_code != 200:\n        return {}\n\n    data = res.json()\n\n    isbn = None\n    year = None\n    cover = None\n\n    for ed in data.get(\"entries\", []):\n\n        isbn_list = ed.get(\"isbn_13\") or ed.get(\"isbn_10\")\n        if isbn_list:\n            isbn = isbn_list[0]\n\n        if ed.get(\"publish_date\"):\n            m = re.search(r\"\\d{4}\", ed[\"publish_date\"])\n            if m:\n                year = m.group(0)\n\n        cover_id = ed.get(\"covers\", [None])[0]\n        if cover_id:\n            cover = f\"https://covers.openlibrary.org/b/id/{cover_id}-L.jpg\"\n\n        if isbn and year and cover:\n            break\n\n    return {\n        \"isbn\": isbn,\n        \"ano_publicacao\": year,\n        \"imagem_url\": cover,\n    }\n\n# =========================\n# GOOGLE FALLBACK\n# =========================\n\ndef enrich_google(title, author):\n\n    query = f\"{title} {author}\"\n\n    res = requests.get(\n        GOOGLE_BOOKS_URL,\n        params={\"q\": query, \"maxResults\": 1}\n    )\n\n    items = res.json().get(\"items\")\n\n    if not items:\n        return {}\n\n    volume = items[0][\"volumeInfo\"]\n\n    isbn = None\n    for ident in volume.get(\"industryIdentifiers\", []):\n        if ident[\"type\"] in [\"ISBN_13\",\"ISBN_10\"]:\n            isbn = ident[\"identifier\"]\n\n    year = None\n    if volume.get(\"publishedDate\"):\n        m = re.search(r\"\\d{4}\", volume[\"publishedDate\"])\n        if m:\n            year = m.group(0)\n\n    cover = volume.get(\"imageLinks\", {}).get(\"thumbnail\")\n\n    return {\n        \"isbn\": isbn,\n        \"ano_publicacao\": year,\n        \"imagem_url\": cover,\n    }\n\n# =========================\n# LLM\n# =========================\n\ndef generate_synopsis(title, author):\n\n    log(f\"LLM → {title}\")\n\n    prompt = f\"\"\"\nSinopse curta (até 60 palavras):\n\n{title} — {author}\n\"\"\"\n\n    res = requests.post(\n        OLLAMA_URL,\n        json={\n            \"model\": MODEL,\n            \"prompt\": prompt,\n            \"stream\": False,\n        }\n    )\n\n    return res.json()[\"response\"].strip()\n\n# =========================\n# INSERT\n# =========================\n\ndef insert_book(payload):\n\n    url = f\"{SUPABASE_URL}/rest/v1/livros\"\n\n    requests.post(\n        url,\n        headers=HEADERS,\n        json=payload\n    )\n\n    log(f\"INSERT → {payload['titulo']}\")\n\n# =========================\n# PIPELINE\n# =========================\n\ndef run():\n\n    total_inserted = 0\n    total_skipped = 0\n\n    for query in QUERIES:\n\n        cluster_inserted = 0\n        cluster_skipped = 0\n\n        books = fetch_by_query(query)\n\n        for b in books:\n\n            titulo = b.get(\"title\")\n            autores = \", \".join(\n                b.get(\"author_name\", [])\n            )\n\n            metadata = enrich_openlibrary(b.get(\"key\"))\n\n            if not metadata.get(\"isbn\") or not metadata.get(\"imagem_url\"):\n                g_meta = enrich_google(titulo, autores)\n                metadata = {**g_meta, **metadata}\n\n            slug = slugify(titulo)\n            isbn = metadata.get(\"isbn\")\n\n            if book_exists(slug, isbn):\n                cluster_skipped += 1\n                total_skipped += 1\n                continue\n\n            descricao = generate_synopsis(titulo, autores)\n\n            payload = {\n                \"id\": str(uuid.uuid4()),\n                \"titulo\": titulo,\n                \"slug\": slug,\n                \"autor\": autores,\n                \"descricao\": descricao,\n                \"isbn\": isbn,\n                \"ano_publicacao\": metadata.get(\"ano_publicacao\"),\n                \"imagem_url\": metadata.get(\"imagem_url\"),\n            }\n\n            insert_book(payload)\n\n            cluster_inserted += 1\n            total_inserted += 1\n\n        log(\n            f\"CLUSTER {query} → +{cluster_inserted} | skip {cluster_skipped}\"\n        )\n\n    log(\"===== RESUMO FINAL =====\")\n    log(f\"INSERTS → {total_inserted}\")\n    log(f\"SKIPS → {total_skipped}\")\n\n# =========================\n# RUN\n# =========================\n\nif __name__ == \"__main__\":\n    run()\n",
    "state\\2026-02-16_10-01_site_bootstrap_part_001.json": "{\n  \"tree_site\": \"app\\napp\\\\(internal)\\napp\\\\(internal)\\\\api\\napp\\\\(internal)\\\\api\\\\click\\napp\\\\(internal)\\\\api\\\\click\\\\[id]\\napp\\\\(public)\\napp\\\\(public)\\\\autores\\napp\\\\(public)\\\\categorias\\napp\\\\(public)\\\\categorias\\\\[slug]\\napp\\\\(public)\\\\listas\\napp\\\\(public)\\\\listas\\\\[slug]\\napp\\\\(public)\\\\listas\\\\[slug]\\\\_components\\napp\\\\(public)\\\\listas\\\\[slug]\\\\_data\\napp\\\\(public)\\\\listas\\\\[slug]\\\\_graph\\napp\\\\(public)\\\\livros\\napp\\\\(public)\\\\livros\\\\[slug]\\napp\\\\(public)\\\\livros\\\\[slug]\\\\_components\\napp\\\\(public)\\\\livros\\\\[slug]\\\\_data\\napp\\\\(public)\\\\livros\\\\[slug]\\\\_graph\\napp\\\\(public)\\\\ofertas\\napp\\\\(public)\\\\ofertas\\\\_components\\napp\\\\(public)\\\\ofertas\\\\_data\\napp\\\\(public)\\\\tags\\napp\\\\teste\\napp\\\\teste\\\\[id]\\nlib\\nlib\\\\supabase\\npublic\",\n  \"project_state\": \"project_state.json não encontrado.\",\n  \"database_schema_abstract\": \"database_schema.json não encontrado.\",\n  \"files\": {\n    \"app\\\\globals.css\": \"@import \\\"tailwindcss\\\";\\n\\n:root {\\n  --background: #ffffff;\\n  --foreground: #171717;\\n}\\n\\n@theme inline {\\n  --color-background: var(--background);\\n  --color-foreground: var(--foreground);\\n  --font-sans: var(--font-geist-sans);\\n  --font-mono: var(--font-geist-mono);\\n}\\n\\n@media (prefers-color-scheme: dark) {\\n  :root {\\n    --background: #0a0a0a;\\n    --foreground: #ededed;\\n  }\\n}\\n\\nbody {\\n  background: var(--background);\\n  color: var(--foreground);\\n  font-family: Arial, Helvetica, sans-serif;\\n}\\n\",\n    \"app\\\\layout.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport \\\"./globals.css\\\";\\n\\nexport default function RootLayout({\\n  children,\\n}: {\\n  children: React.ReactNode;\\n}) {\\n  return (\\n    <html lang=\\\"pt-BR\\\">\\n      <body>\\n\\n        {/* =========================\\n            NAVBAR GLOBAL\\n        ========================== */}\\n        <header className=\\\"border-b bg-white\\\">\\n\\n          <nav className=\\\"max-w-6xl mx-auto px-6 py-4 flex gap-6 text-sm font-medium\\\">\\n\\n            <a href=\\\"/\\\" className=\\\"hover:text-blue-600\\\">\\n              Home\\n            </a>\\n\\n            <a href=\\\"/listas\\\" className=\\\"hover:text-blue-600\\\">\\n              Listas\\n            </a>\\n\\n            <a href=\\\"/livros\\\" className=\\\"hover:text-blue-600\\\">\\n              Livros\\n            </a>\\n\\n            <a href=\\\"/ofertas\\\" className=\\\"hover:text-blue-600\\\">\\n              Ofertas\\n            </a>\\n\\n          </nav>\\n\\n        </header>\\n\\n        {/* PAGE */}\\n        <main>\\n          {children}\\n        </main>\\n\\n      </body>\\n    </html>\\n  );\\n}\\n\",\n    \"app\\\\(internal)\\\\api\\\\click\\\\[id]\\\\route.ts\": \"export const runtime = \\\"edge\\\";\\n\\nimport { NextResponse } from \\\"next/server\\\";\\nimport { createClient } from \\\"@supabase/supabase-js\\\";\\n\\nexport async function GET(\\n  req: Request,\\n  { params }: { params: { id: string } }\\n) {\\n  const offerId = params.id;\\n\\n  const supabase = createClient(\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\n    process.env.SUPABASE_SERVICE_ROLE_KEY!\\n  );\\n\\n  /**\\n   * 1) Buscar oferta + livro\\n   */\\n  const { data: oferta, error: ofertaError } =\\n    await supabase\\n      .from(\\\"ofertas\\\")\\n      .select(\\\"id, livro_id, url_afiliada\\\")\\n      .eq(\\\"id\\\", offerId)\\n      .single();\\n\\n  if (ofertaError || !oferta) {\\n    return new NextResponse(\\\"Oferta não encontrada\\\", {\\n      status: 404,\\n    });\\n  }\\n\\n  /**\\n   * 2) Metadados\\n   */\\n  const userAgent =\\n    req.headers.get(\\\"user-agent\\\") ?? null;\\n\\n  const referer =\\n    req.headers.get(\\\"referer\\\") ?? null;\\n\\n  const ip =\\n    req.headers.get(\\\"x-forwarded-for\\\") ??\\n    \\\"0.0.0.0\\\";\\n\\n  /**\\n   * 3) Hash IP (Edge-safe)\\n   */\\n  const hashBuffer = await crypto.subtle.digest(\\n    \\\"SHA-256\\\",\\n    new TextEncoder().encode(ip)\\n  );\\n\\n  const ipHash = Array.from(\\n    new Uint8Array(hashBuffer)\\n  )\\n    .map((b) => b.toString(16).padStart(2, \\\"0\\\"))\\n    .join(\\\"\\\");\\n\\n  /**\\n   * 4) Insert tracking\\n   */\\n  await supabase.from(\\\"oferta_clicks\\\").insert({\\n    oferta_id: oferta.id,\\n    livro_id: oferta.livro_id,\\n    user_agent: userAgent,\\n    referer: referer,\\n    ip_hash: ipHash,\\n  });\\n\\n  /**\\n   * 5) Redirect afiliado\\n   */\\n  return NextResponse.redirect(\\n    oferta.url_afiliada,\\n    302\\n  );\\n}\\n\",\n    \"app\\\\(public)\\\\page.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport { createClient } from \\\"@supabase/supabase-js\\\";\\n\\nexport default async function Home() {\\n  const supabase = createClient(\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\n  );\\n\\n  /**\\n   * Listas (hub primário SEO)\\n   */\\n  const { data: listas } = await supabase\\n    .from(\\\"listas\\\")\\n    .select(\\\"titulo, slug\\\")\\n    .limit(6);\\n\\n  /**\\n   * Livros (discovery)\\n   */\\n  const { data: livros } = await supabase\\n    .from(\\\"livros\\\")\\n    .select(\\\"titulo, slug\\\")\\n    .limit(6);\\n\\n  /**\\n   * Ofertas (monetização)\\n   */\\n  const { data: ofertas } = await supabase\\n    .from(\\\"ofertas\\\")\\n    .select(`\\n      id,\\n      livros (\\n        titulo,\\n        slug\\n      )\\n    `)\\n    .eq(\\\"ativa\\\", true)\\n    .limit(6);\\n\\n  return (\\n    <main className=\\\"p-10 max-w-3xl mx-auto space-y-10\\\">\\n\\n      {/* =========================\\n          Header + Nav\\n      ========================== */}\\n      <header className=\\\"space-y-4\\\">\\n\\n        <h1 className=\\\"text-3xl font-bold\\\">\\n          Livraria Alexandria\\n        </h1>\\n\\n        <p className=\\\"text-lg text-gray-700\\\">\\n          [livros].\\n        </p>\\n\\n        {/* NAV PRIMÁRIA */}\\n        <nav className=\\\"flex gap-6 pt-2 text-blue-600 font-medium\\\">\\n          <a href=\\\"/listas\\\" className=\\\"hover:underline\\\">\\n            Ver todas as listas →\\n          </a>\\n\\n          <a href=\\\"/livros\\\" className=\\\"hover:underline\\\">\\n            Ver todos os livros →\\n          </a>\\n        </nav>\\n\\n      </header>\\n\\n      {/* =========================\\n          Listas\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n        <h2 className=\\\"text-xl font-semibold\\\">\\n          Listas recomendadas\\n        </h2>\\n\\n        <ul className=\\\"list-disc list-inside space-y-1\\\">\\n          {listas?.map((l) => (\\n            <li key={l.slug}>\\n              <a\\n                href={`/listas/${l.slug}`}\\n                className=\\\"text-blue-600 hover:underline\\\"\\n              >\\n                {l.titulo}\\n              </a>\\n            </li>\\n          ))}\\n        </ul>\\n      </section>\\n\\n      {/* =========================\\n          Livros\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n        <h2 className=\\\"text-xl font-semibold\\\">\\n          Livros em destaque\\n        </h2>\\n\\n        <ul className=\\\"list-disc list-inside space-y-1\\\">\\n          {livros?.map((l) => (\\n            <li key={l.slug}>\\n              <a\\n                href={`/livros/${l.slug}`}\\n                className=\\\"text-blue-600 hover:underline\\\"\\n              >\\n                {l.titulo}\\n              </a>\\n            </li>\\n          ))}\\n        </ul>\\n      </section>\\n\\n      {/* =========================\\n          Ofertas\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n        <h2 className=\\\"text-xl font-semibold\\\">\\n          Ofertas ativas\\n        </h2>\\n\\n        <ul className=\\\"list-disc list-inside space-y-1\\\">\\n          {ofertas?.map((o: any) => (\\n            <li key={o.id}>\\n              <a\\n                href={`/livros/${o.livros.slug}`}\\n                className=\\\"text-blue-600 hover:underline\\\"\\n              >\\n                {o.livros.titulo}\\n              </a>\\n            </li>\\n          ))}\\n        </ul>\\n      </section>\\n\\n    </main>\\n  );\\n}\\n\",\n    \"app\\\\(public)\\\\categorias\\\\page.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport { createClient } from \\\"@supabase/supabase-js\\\";\\n\\nexport default async function CategoriasPage() {\\n\\n  const supabase = createClient(\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\n  );\\n\\n  /**\\n   * Categorias + contagem\\n   */\\n  const { data: categorias } = await supabase\\n    .from(\\\"categorias\\\")\\n    .select(`\\n      id,\\n      nome,\\n      slug,\\n      livros_categorias (\\n        id\\n      )\\n    `)\\n    .order(\\\"nome\\\");\\n\\n  return (\\n    <main className=\\\"p-10 max-w-4xl mx-auto space-y-6\\\">\\n\\n      <h1 className=\\\"text-2xl font-bold\\\">\\n        Categorias\\n      </h1>\\n\\n      <ul className=\\\"space-y-3\\\">\\n\\n        {categorias?.map((cat: any) => {\\n\\n          const count =\\n            cat.livros_categorias?.length ?? 0;\\n\\n          return (\\n\\n            <li\\n              key={cat.slug}\\n              className=\\\"flex justify-between border p-4 rounded-lg\\\"\\n            >\\n\\n              <a\\n                href={`/categorias/${cat.slug}`}\\n                className=\\\"text-blue-600 hover:underline font-medium\\\"\\n              >\\n                {cat.nome}\\n              </a>\\n\\n              <span className=\\\"text-sm text-gray-500\\\">\\n                {count} livros\\n              </span>\\n\\n            </li>\\n\\n          );\\n\\n        })}\\n\\n      </ul>\\n\\n    </main>\\n  );\\n}\\n\",\n    \"app\\\\(public)\\\\categorias\\\\[slug]\\\\page.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport { notFound } from \\\"next/navigation\\\";\\nimport { createClient } from \\\"@supabase/supabase-js\\\";\\n\\ntype PageProps = {\\n  params: Promise<{\\n    slug: string;\\n  }>;\\n};\\n\\nexport default async function CategoriaPage({\\n  params,\\n}: PageProps) {\\n\\n  const { slug } = await params;\\n\\n  const supabase = createClient(\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\n  );\\n\\n  /**\\n   * =========================\\n   * Categoria\\n   * =========================\\n   */\\n  const { data: categoria } = await supabase\\n    .from(\\\"categorias\\\")\\n    .select(\\\"id, nome, slug\\\")\\n    .eq(\\\"slug\\\", slug)\\n    .single();\\n\\n  if (!categoria) return notFound();\\n\\n  /**\\n   * =========================\\n   * Listas editoriais\\n   * =========================\\n   */\\n  const { data: listasEditorial } = await supabase\\n    .from(\\\"listas_categorias\\\")\\n    .select(`\\n      weight,\\n      listas (\\n        titulo,\\n        slug\\n      )\\n    `)\\n    .eq(\\\"categoria_id\\\", categoria.id)\\n    .order(\\\"weight\\\", { ascending: false });\\n\\n  const editoriais =\\n    listasEditorial?.map((l: any) => l.listas) ?? [];\\n\\n  /**\\n   * =========================\\n   * Livros da categoria\\n   * =========================\\n   */\\n  const { data: livrosPivot } = await supabase\\n    .from(\\\"livros_categorias\\\")\\n    .select(`\\n      livros (\\n        id,\\n        titulo,\\n        slug,\\n        imagem_url\\n      )\\n    `)\\n    .eq(\\\"categoria_id\\\", categoria.id);\\n\\n  const livros =\\n    livrosPivot?.map((l: any) => l.livros) ?? [];\\n\\n  /**\\n   * =========================\\n   * Listas automáticas\\n   * =========================\\n   */\\n  const livroIds = livros.map((l: any) => l.id);\\n\\n  let automaticas: any[] = [];\\n\\n  if (livroIds.length) {\\n\\n    const { data: listasAuto } = await supabase\\n      .from(\\\"lista_livros\\\")\\n      .select(`\\n        listas (\\n          titulo,\\n          slug\\n        )\\n      `)\\n      .in(\\\"livro_id\\\", livroIds)\\n      .limit(5);\\n\\n    automaticas =\\n      listasAuto?.map((l: any) => l.listas) ?? [];\\n  }\\n\\n  /**\\n   * =========================\\n   * Merge sem duplicar\\n   * =========================\\n   */\\n  const slugsEditorial =\\n    new Set(editoriais.map((l) => l.slug));\\n\\n  const listas = [\\n    ...editoriais,\\n    ...automaticas.filter(\\n      (l) => !slugsEditorial.has(l.slug)\\n    ),\\n  ];\\n\\n  return (\\n    <main className=\\\"p-10 max-w-5xl mx-auto space-y-10\\\">\\n\\n      {/* =========================\\n          Header\\n      ========================== */}\\n      <section className=\\\"space-y-2\\\">\\n\\n        <h1 className=\\\"text-3xl font-bold\\\">\\n          {categoria.nome}\\n        </h1>\\n\\n        <p className=\\\"text-gray-600\\\">\\n          Livros classificados nesta categoria.\\n        </p>\\n\\n      </section>\\n\\n      {/* =========================\\n          Listas relacionadas\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n\\n        <h2 className=\\\"text-xl font-semibold\\\">\\n          Listas relacionadas\\n        </h2>\\n\\n        {!listas.length && (\\n          <p className=\\\"text-gray-500\\\">\\n            Nenhuma lista relacionada ainda.\\n          </p>\\n        )}\\n\\n        <ul className=\\\"list-disc list-inside space-y-1\\\">\\n\\n          {listas.map((lista: any) => (\\n\\n            <li key={lista.slug}>\\n\\n              <a\\n                href={`/listas/${lista.slug}`}\\n                className=\\\"text-blue-600 hover:underline\\\"\\n              >\\n                {lista.titulo}\\n              </a>\\n\\n            </li>\\n\\n          ))}\\n\\n        </ul>\\n\\n      </section>\\n\\n      {/* =========================\\n          Livros\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n\\n        <h2 className=\\\"text-xl font-semibold\\\">\\n          Livros da categoria\\n        </h2>\\n\\n        {!livros.length && (\\n          <p className=\\\"text-gray-500\\\">\\n            Nenhum livro nesta categoria ainda.\\n          </p>\\n        )}\\n\\n        <ul className=\\\"space-y-4\\\">\\n\\n          {livros.map((livro: any) => (\\n\\n            <li\\n              key={livro.slug}\\n              className=\\\"flex items-center gap-4 border p-4 rounded-lg\\\"\\n            >\\n\\n              {livro.imagem_url && (\\n                <img\\n                  src={livro.imagem_url}\\n                  className=\\\"w-12 h-16 object-cover rounded\\\"\\n                />\\n              )}\\n\\n              <a\\n                href={`/livros/${livro.slug}`}\\n                className=\\\"text-blue-600 hover:underline font-medium\\\"\\n              >\\n                {livro.titulo}\\n              </a>\\n\\n            </li>\\n\\n          ))}\\n\\n        </ul>\\n\\n      </section>\\n\\n    </main>\\n  );\\n}\\n\",\n    \"app\\\\(public)\\\\listas\\\\[slug]\\\\page.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport { notFound } from \\\"next/navigation\\\";\\nimport { supabase } from \\\"@/lib/supabase\\\";\\n\\ntype PageProps = {\\n  params: Promise<{\\n    slug: string;\\n  }>;\\n};\\n\\nexport default async function ListaPage({\\n  params,\\n}: PageProps) {\\n  const { slug } = await params;\\n\\n  /**\\n   * Lista\\n   */\\n  const { data: lista } = await supabase\\n    .from(\\\"listas\\\")\\n    .select(\\\"id, titulo, introducao\\\")\\n    .eq(\\\"slug\\\", slug)\\n    .single();\\n\\n  if (!lista) {\\n    notFound();\\n  }\\n\\n  /**\\n   * Livros\\n   */\\n  const { data: livros } = await supabase\\n    .from(\\\"lista_livros\\\")\\n    .select(`\\n      posicao,\\n      livros (\\n        id,\\n        titulo,\\n        slug,\\n        autor,\\n        imagem_url\\n      )\\n    `)\\n    .eq(\\\"lista_id\\\", lista.id)\\n    .order(\\\"posicao\\\", { ascending: true });\\n\\n  /**\\n   * =========================\\n   * Schema.org ItemList\\n   * =========================\\n   */\\n  const schema = {\\n    \\\"@context\\\": \\\"https://schema.org\\\",\\n    \\\"@type\\\": \\\"ItemList\\\",\\n    name: lista.titulo,\\n    description: lista.introducao,\\n    itemListElement: livros?.map(\\n      (item: any, index: number) => ({\\n        \\\"@type\\\": \\\"ListItem\\\",\\n        position: index + 1,\\n        item: {\\n          \\\"@type\\\": \\\"Book\\\",\\n          name: item.livros.titulo,\\n          image:\\n            item.livros.imagem_url || undefined,\\n          author: {\\n            \\\"@type\\\": \\\"Person\\\",\\n            name: item.livros.autor,\\n          },\\n        },\\n      })\\n    ),\\n  };\\n\\n  return (\\n    <main className=\\\"max-w-3xl mx-auto px-6 py-10 space-y-8\\\">\\n      {/* Schema */}\\n      <script\\n        type=\\\"application/ld+json\\\"\\n        dangerouslySetInnerHTML={{\\n          __html: JSON.stringify(schema),\\n        }}\\n      />\\n\\n      {/* Header */}\\n      <header className=\\\"space-y-4\\\">\\n        <h1 className=\\\"text-3xl font-bold\\\">\\n          {lista.titulo}\\n        </h1>\\n\\n        <p className=\\\"text-lg text-gray-700\\\">\\n          {lista.introducao}\\n        </p>\\n      </header>\\n\\n      {/* Ranking */}\\n      <section className=\\\"space-y-6\\\">\\n        {livros?.map((item: any) => (\\n          <article\\n            key={item.livros.id}\\n            className=\\\"space-y-2\\\"\\n          >\\n            <h2 className=\\\"text-xl font-semibold\\\">\\n              {item.posicao}.{\\\" \\\"}\\n              <a\\n                href={`/livros/${item.livros.slug}`}\\n                className=\\\"text-blue-600 hover:underline\\\"\\n              >\\n                {item.livros.titulo}\\n              </a>\\n            </h2>\\n\\n            <p className=\\\"text-sm text-gray-600\\\">\\n              por {item.livros.autor}\\n            </p>\\n          </article>\\n        ))}\\n      </section>\\n    </main>\\n  );\\n}\\n\",\n    \"app\\\\(public)\\\\livros\\\\page.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport { createClient } from \\\"@supabase/supabase-js\\\";\\n\\nexport default async function LivrosIndex() {\\n  const supabase = createClient(\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\n  );\\n\\n  const { data: livros } = await supabase\\n    .from(\\\"livros\\\")\\n    .select(\\\"titulo, slug, imagem_url, autor\\\")\\n    .order(\\\"titulo\\\");\\n\\n  return (\\n    <main className=\\\"p-10 max-w-4xl mx-auto space-y-6\\\">\\n\\n      <h1 className=\\\"text-2xl font-bold\\\">\\n        Todos os livros\\n      </h1>\\n\\n      <ul className=\\\"divide-y\\\">\\n\\n        {livros?.map((l) => (\\n\\n          <li key={l.slug} className=\\\"py-4\\\">\\n\\n            <a\\n              href={`/livros/${l.slug}`}\\n              className=\\\"flex gap-4 items-center hover:bg-gray-50 p-2 rounded\\\"\\n            >\\n\\n              {/* CAPA MINI */}\\n              <div className=\\\"w-12 h-16 bg-gray-100 flex-shrink-0 overflow-hidden rounded\\\">\\n\\n                {l.imagem_url ? (\\n                  <img\\n                    src={l.imagem_url}\\n                    alt={l.titulo}\\n                    className=\\\"w-full h-full object-cover\\\"\\n                  />\\n                ) : (\\n                  <div className=\\\"w-full h-full flex items-center justify-center text-[10px] text-gray-400\\\">\\n                    —\\n                  </div>\\n                )}\\n\\n              </div>\\n\\n              {/* TEXTO */}\\n              <div className=\\\"leading-tight\\\">\\n\\n                <p className=\\\"font-medium\\\">\\n                  {l.titulo}\\n                </p>\\n\\n                {l.autor && (\\n                  <p className=\\\"text-sm text-gray-500\\\">\\n                    {l.autor}\\n                  </p>\\n                )}\\n\\n              </div>\\n\\n            </a>\\n\\n          </li>\\n\\n        ))}\\n\\n      </ul>\\n\\n    </main>\\n  );\\n}\\n\",\n    \"app\\\\(public)\\\\livros\\\\[slug]\\\\page.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport { notFound } from \\\"next/navigation\\\";\\nimport { createClient } from \\\"@supabase/supabase