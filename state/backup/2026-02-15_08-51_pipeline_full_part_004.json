\"edge\\\";\\n\\nimport { createClient } from \\\"@supabase/supabase-js\\\";\\n\\nexport default async function Home() {\\n  const supabase = createClient(\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\n  );\\n\\n  /**\\n   * Listas (hub primário SEO)\\n   */\\n  const { data: listas } = await supabase\\n    .from(\\\"listas\\\")\\n    .select(\\\"titulo, slug\\\")\\n    .limit(6);\\n\\n  /**\\n   * Livros (discovery)\\n   */\\n  const { data: livros } = await supabase\\n    .from(\\\"livros\\\")\\n    .select(\\\"titulo, slug\\\")\\n    .limit(6);\\n\\n  /**\\n   * Ofertas (monetização)\\n   */\\n  const { data: ofertas } = await supabase\\n    .from(\\\"ofertas\\\")\\n    .select(`\\n      id,\\n      livros (\\n        titulo,\\n        slug\\n      )\\n    `)\\n    .eq(\\\"ativa\\\", true)\\n    .limit(6);\\n\\n  return (\\n    <main className=\\\"p-10 max-w-3xl mx-auto space-y-10\\\">\\n\\n      {/* =========================\\n          Header + Nav\\n      ========================== */}\\n      <header className=\\\"space-y-4\\\">\\n\\n        <h1 className=\\\"text-3xl font-bold\\\">\\n          Livraria Alexandria\\n        </h1>\\n\\n        <p className=\\\"text-lg text-gray-700\\\">\\n          [livros].\\n        </p>\\n\\n        {/* NAV PRIMÁRIA */}\\n        <nav className=\\\"flex gap-6 pt-2 text-blue-600 font-medium\\\">\\n          <a href=\\\"/listas\\\" className=\\\"hover:underline\\\">\\n            Ver todas as listas →\\n          </a>\\n\\n          <a href=\\\"/livros\\\" className=\\\"hover:underline\\\">\\n            Ver todos os livros →\\n          </a>\\n        </nav>\\n\\n      </header>\\n\\n      {/* =========================\\n          Listas\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n        <h2 className=\\\"text-xl font-semibold\\\">\\n          Listas recomendadas\\n        </h2>\\n\\n        <ul className=\\\"list-disc list-inside space-y-1\\\">\\n          {listas?.map((l) => (\\n            <li key={l.slug}>\\n              <a\\n                href={`/listas/${l.slug}`}\\n                className=\\\"text-blue-600 hover:underline\\\"\\n              >\\n                {l.titulo}\\n              </a>\\n            </li>\\n          ))}\\n        </ul>\\n      </section>\\n\\n      {/* =========================\\n          Livros\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n        <h2 className=\\\"text-xl font-semibold\\\">\\n          Livros em destaque\\n        </h2>\\n\\n        <ul className=\\\"list-disc list-inside space-y-1\\\">\\n          {livros?.map((l) => (\\n            <li key={l.slug}>\\n              <a\\n                href={`/livros/${l.slug}`}\\n                className=\\\"text-blue-600 hover:underline\\\"\\n              >\\n                {l.titulo}\\n              </a>\\n            </li>\\n          ))}\\n        </ul>\\n      </section>\\n\\n      {/* =========================\\n          Ofertas\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n        <h2 className=\\\"text-xl font-semibold\\\">\\n          Ofertas ativas\\n        </h2>\\n\\n        <ul className=\\\"list-disc list-inside space-y-1\\\">\\n          {ofertas?.map((o: any) => (\\n            <li key={o.id}>\\n              <a\\n                href={`/livros/${o.livros.slug}`}\\n                className=\\\"text-blue-600 hover:underline\\\"\\n              >\\n                {o.livros.titulo}\\n              </a>\\n            </li>\\n          ))}\\n        </ul>\\n      </section>\\n\\n    </main>\\n  );\\n}\\n\",\n    \"app\\\\(public)\\\\categorias\\\\page.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport { createClient } from \\\"@supabase/supabase-js\\\";\\n\\nexport default async function CategoriasPage() {\\n\\n  const supabase = createClient(\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\n  );\\n\\n  /**\\n   * Categorias + contagem\\n   */\\n  const { data: categorias } = await supabase\\n    .from(\\\"categorias\\\")\\n    .select(`\\n      id,\\n      nome,\\n      slug,\\n      livros_categorias (\\n        id\\n      )\\n    `)\\n    .order(\\\"nome\\\");\\n\\n  return (\\n    <main className=\\\"p-10 max-w-4xl mx-auto space-y-6\\\">\\n\\n      <h1 className=\\\"text-2xl font-bold\\\">\\n        Categorias\\n      </h1>\\n\\n      <ul className=\\\"space-y-3\\\">\\n\\n        {categorias?.map((cat: any) => {\\n\\n          const count =\\n            cat.livros_categorias?.length ?? 0;\\n\\n          return (\\n\\n            <li\\n              key={cat.slug}\\n              className=\\\"flex justify-between border p-4 rounded-lg\\\"\\n            >\\n\\n              <a\\n                href={`/categorias/${cat.slug}`}\\n                className=\\\"text-blue-600 hover:underline font-medium\\\"\\n              >\\n                {cat.nome}\\n              </a>\\n\\n              <span className=\\\"text-sm text-gray-500\\\">\\n                {count} livros\\n              </span>\\n\\n            </li>\\n\\n          );\\n\\n        })}\\n\\n      </ul>\\n\\n    </main>\\n  );\\n}\\n\",\n    \"app\\\\(public)\\\\categorias\\\\[slug]\\\\page.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport { notFound } from \\\"next/navigation\\\";\\nimport { createClient } from \\\"@supabase/supabase-js\\\";\\n\\ntype PageProps = {\\n  params: Promise<{\\n    slug: string;\\n  }>;\\n};\\n\\nexport default async function CategoriaPage({\\n  params,\\n}: PageProps) {\\n\\n  const { slug } = await params;\\n\\n  const supabase = createClient(\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\n  );\\n\\n  /**\\n   * =========================\\n   * Categoria\\n   * =========================\\n   */\\n  const { data: categoria } = await supabase\\n    .from(\\\"categorias\\\")\\n    .select(\\\"id, nome, slug\\\")\\n    .eq(\\\"slug\\\", slug)\\n    .single();\\n\\n  if (!categoria) return notFound();\\n\\n  /**\\n   * =========================\\n   * Listas editoriais\\n   * =========================\\n   */\\n  const { data: listasEditorial } = await supabase\\n    .from(\\\"listas_categorias\\\")\\n    .select(`\\n      weight,\\n      listas (\\n        titulo,\\n        slug\\n      )\\n    `)\\n    .eq(\\\"categoria_id\\\", categoria.id)\\n    .order(\\\"weight\\\", { ascending: false });\\n\\n  const editoriais =\\n    listasEditorial?.map((l: any) => l.listas) ?? [];\\n\\n  /**\\n   * =========================\\n   * Livros da categoria\\n   * =========================\\n   */\\n  const { data: livrosPivot } = await supabase\\n    .from(\\\"livros_categorias\\\")\\n    .select(`\\n      livros (\\n        id,\\n        titulo,\\n        slug,\\n        imagem_url\\n      )\\n    `)\\n    .eq(\\\"categoria_id\\\", categoria.id);\\n\\n  const livros =\\n    livrosPivot?.map((l: any) => l.livros) ?? [];\\n\\n  /**\\n   * =========================\\n   * Listas automáticas\\n   * =========================\\n   */\\n  const livroIds = livros.map((l: any) => l.id);\\n\\n  let automaticas: any[] = [];\\n\\n  if (livroIds.length) {\\n\\n    const { data: listasAuto } = await supabase\\n      .from(\\\"lista_livros\\\")\\n      .select(`\\n        listas (\\n          titulo,\\n          slug\\n        )\\n      `)\\n      .in(\\\"livro_id\\\", livroIds)\\n      .limit(5);\\n\\n    automaticas =\\n      listasAuto?.map((l: any) => l.listas) ?? [];\\n  }\\n\\n  /**\\n   * =========================\\n   * Merge sem duplicar\\n   * =========================\\n   */\\n  const slugsEditorial =\\n    new Set(editoriais.map((l) => l.slug));\\n\\n  const listas = [\\n    ...editoriais,\\n    ...automaticas.filter(\\n      (l) => !slugsEditorial.has(l.slug)\\n    ),\\n  ];\\n\\n  return (\\n    <main className=\\\"p-10 max-w-5xl mx-auto space-y-10\\\">\\n\\n      {/* =========================\\n          Header\\n      ========================== */}\\n      <section className=\\\"space-y-2\\\">\\n\\n        <h1 className=\\\"text-3xl font-bold\\\">\\n          {categoria.nome}\\n        </h1>\\n\\n        <p className=\\\"text-gray-600\\\">\\n          Livros classificados nesta categoria.\\n        </p>\\n\\n      </section>\\n\\n      {/* =========================\\n          Listas relacionadas\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n\\n        <h2 className=\\\"text-xl font-semibold\\\">\\n          Listas relacionadas\\n        </h2>\\n\\n        {!listas.length && (\\n          <p className=\\\"text-gray-500\\\">\\n            Nenhuma lista relacionada ainda.\\n          </p>\\n        )}\\n\\n        <ul className=\\\"list-disc list-inside space-y-1\\\">\\n\\n          {listas.map((lista: any) => (\\n\\n            <li key={lista.slug}>\\n\\n              <a\\n                href={`/listas/${lista.slug}`}\\n                className=\\\"text-blue-600 hover:underline\\\"\\n              >\\n                {lista.titulo}\\n              </a>\\n\\n            </li>\\n\\n          ))}\\n\\n        </ul>\\n\\n      </section>\\n\\n      {/* =========================\\n          Livros\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n\\n        <h2 className=\\\"text-xl font-semibold\\\">\\n          Livros da categoria\\n        </h2>\\n\\n        {!livros.length && (\\n          <p className=\\\"text-gray-500\\\">\\n            Nenhum livro nesta categoria ainda.\\n          </p>\\n        )}\\n\\n        <ul className=\\\"space-y-4\\\">\\n\\n          {livros.map((livro: any) => (\\n\\n            <li\\n              key={livro.slug}\\n              className=\\\"flex items-center gap-4 border p-4 rounded-lg\\\"\\n            >\\n\\n              {livro.imagem_url && (\\n                <img\\n                  src={livro.imagem_url}\\n                  className=\\\"w-12 h-16 object-cover rounded\\\"\\n                />\\n              )}\\n\\n              <a\\n                href={`/livros/${livro.slug}`}\\n                className=\\\"text-blue-600 hover:underline font-medium\\\"\\n              >\\n                {livro.titulo}\\n              </a>\\n\\n            </li>\\n\\n          ))}\\n\\n        </ul>\\n\\n      </section>\\n\\n    </main>\\n  );\\n}\\n\",\n    \"app\\\\(public)\\\\listas\\\\[slug]\\\\page.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport { notFound } from \\\"next/navigation\\\";\\nimport { supabase } from \\\"@/lib/supabase\\\";\\n\\ntype PageProps = {\\n  params: Promise<{\\n    slug: string;\\n  }>;\\n};\\n\\nexport default async function ListaPage({\\n  params,\\n}: PageProps) {\\n  const { slug } = await params;\\n\\n  /**\\n   * Lista\\n   */\\n  const { data: lista } = await supabase\\n    .from(\\\"listas\\\")\\n    .select(\\\"id, titulo, introducao\\\")\\n    .eq(\\\"slug\\\", slug)\\n    .single();\\n\\n  if (!lista) {\\n    notFound();\\n  }\\n\\n  /**\\n   * Livros\\n   */\\n  const { data: livros } = await supabase\\n    .from(\\\"lista_livros\\\")\\n    .select(`\\n      posicao,\\n      livros (\\n        id,\\n        titulo,\\n        slug,\\n        autor,\\n        imagem_url\\n      )\\n    `)\\n    .eq(\\\"lista_id\\\", lista.id)\\n    .order(\\\"posicao\\\", { ascending: true });\\n\\n  /**\\n   * =========================\\n   * Schema.org ItemList\\n   * =========================\\n   */\\n  const schema = {\\n    \\\"@context\\\": \\\"https://schema.org\\\",\\n    \\\"@type\\\": \\\"ItemList\\\",\\n    name: lista.titulo,\\n    description: lista.introducao,\\n    itemListElement: livros?.map(\\n      (item: any, index: number) => ({\\n        \\\"@type\\\": \\\"ListItem\\\",\\n        position: index + 1,\\n        item: {\\n          \\\"@type\\\": \\\"Book\\\",\\n          name: item.livros.titulo,\\n          image:\\n            item.livros.imagem_url || undefined,\\n          author: {\\n            \\\"@type\\\": \\\"Person\\\",\\n            name: item.livros.autor,\\n          },\\n        },\\n      })\\n    ),\\n  };\\n\\n  return (\\n    <main className=\\\"max-w-3xl mx-auto px-6 py-10 space-y-8\\\">\\n      {/* Schema */}\\n      <script\\n        type=\\\"application/ld+json\\\"\\n        dangerouslySetInnerHTML={{\\n          __html: JSON.stringify(schema),\\n        }}\\n      />\\n\\n      {/* Header */}\\n      <header className=\\\"space-y-4\\\">\\n        <h1 className=\\\"text-3xl font-bold\\\">\\n          {lista.titulo}\\n        </h1>\\n\\n        <p className=\\\"text-lg text-gray-700\\\">\\n          {lista.introducao}\\n        </p>\\n      </header>\\n\\n      {/* Ranking */}\\n      <section className=\\\"space-y-6\\\">\\n        {livros?.map((item: any) => (\\n          <article\\n            key={item.livros.id}\\n            className=\\\"space-y-2\\\"\\n          >\\n            <h2 className=\\\"text-xl font-semibold\\\">\\n              {item.posicao}.{\\\" \\\"}\\n              <a\\n                href={`/livros/${item.livros.slug}`}\\n                className=\\\"text-blue-600 hover:underline\\\"\\n              >\\n                {item.livros.titulo}\\n              </a>\\n            </h2>\\n\\n            <p className=\\\"text-sm text-gray-600\\\">\\n              por {item.livros.autor}\\n            </p>\\n          </article>\\n        ))}\\n      </section>\\n    </main>\\n  );\\n}\\n\",\n    \"app\\\\(public)\\\\livros\\\\page.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport { createClient } from \\\"@supabase/supabase-js\\\";\\n\\nexport default async function LivrosIndex() {\\n  const supabase = createClient(\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\n  );\\n\\n  const { data: livros } = await supabase\\n    .from(\\\"livros\\\")\\n    .select(\\\"titulo, slug, imagem_url, autor\\\")\\n    .order(\\\"titulo\\\");\\n\\n  return (\\n    <main className=\\\"p-10 max-w-4xl mx-auto space-y-6\\\">\\n\\n      <h1 className=\\\"text-2xl font-bold\\\">\\n        Todos os livros\\n      </h1>\\n\\n      <ul className=\\\"divide-y\\\">\\n\\n        {livros?.map((l) => (\\n\\n          <li key={l.slug} className=\\\"py-4\\\">\\n\\n            <a\\n              href={`/livros/${l.slug}`}\\n              className=\\\"flex gap-4 items-center hover:bg-gray-50 p-2 rounded\\\"\\n            >\\n\\n              {/* CAPA MINI */}\\n              <div className=\\\"w-12 h-16 bg-gray-100 flex-shrink-0 overflow-hidden rounded\\\">\\n\\n                {l.imagem_url ? (\\n                  <img\\n                    src={l.imagem_url}\\n                    alt={l.titulo}\\n                    className=\\\"w-full h-full object-cover\\\"\\n                  />\\n                ) : (\\n                  <div className=\\\"w-full h-full flex items-center justify-center text-[10px] text-gray-400\\\">\\n                    —\\n                  </div>\\n                )}\\n\\n              </div>\\n\\n              {/* TEXTO */}\\n              <div className=\\\"leading-tight\\\">\\n\\n                <p className=\\\"font-medium\\\">\\n                  {l.titulo}\\n                </p>\\n\\n                {l.autor && (\\n                  <p className=\\\"text-sm text-gray-500\\\">\\n                    {l.autor}\\n                  </p>\\n                )}\\n\\n              </div>\\n\\n            </a>\\n\\n          </li>\\n\\n        ))}\\n\\n      </ul>\\n\\n    </main>\\n  );\\n}\\n\",\n    \"app\\\\(public)\\\\livros\\\\[slug]\\\\page.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport { notFound } from \\\"next/navigation\\\";\\nimport { createClient } from \\\"@supabase/supabase-js\\\";\\n\\ntype PageProps = {\\n  params: Promise<{\\n    slug: string;\\n  }>;\\n};\\n\\nexport default async function LivroPage({\\n  params,\\n}: PageProps) {\\n  const { slug } = await params;\\n\\n  const supabase = createClient(\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\n  );\\n\\n  /**\\n   * Livro + Categorias\\n   */\\n  const { data: livro } = await supabase\\n    .from(\\\"livros\\\")\\n    .select(`\\n      *,\\n      livros_categorias (\\n        categorias (\\n          nome,\\n          slug\\n        )\\n      )\\n    `)\\n    .eq(\\\"slug\\\", slug)\\n    .single();\\n\\n  if (!livro) {\\n    notFound();\\n  }\\n\\n  /**\\n   * Ofertas\\n   */\\n  const { data: ofertas } = await supabase\\n    .from(\\\"ofertas\\\")\\n    .select(`\\n      id,\\n      preco,\\n      marketplace\\n    `)\\n    .eq(\\\"livro_id\\\", livro.id)\\n    .eq(\\\"ativa\\\", true);\\n\\n  /**\\n   * Listas relacionadas\\n   */\\n  const { data: listasPivot } = await supabase\\n    .from(\\\"lista_livros\\\")\\n    .select(`\\n      listas (\\n        titulo,\\n        slug\\n      )\\n    `)\\n    .eq(\\\"livro_id\\\", livro.id);\\n\\n  const listas =\\n    listasPivot?.map((l: any) => l.listas) ?? [];\\n\\n  /**\\n   * Schema.org\\n   */\\n  const schema = {\\n    \\\"@context\\\": \\\"https://schema.org\\\",\\n    \\\"@type\\\": \\\"Product\\\",\\n    name: livro.titulo,\\n    description: livro.descricao,\\n    image: livro.imagem_url || undefined,\\n    sku: livro.isbn,\\n    brand: {\\n      \\\"@type\\\": \\\"Brand\\\",\\n      name: livro.autor,\\n    },\\n    additionalProperty: [\\n      {\\n        \\\"@type\\\": \\\"PropertyValue\\\",\\n        name: \\\"Autor\\\",\\n        value: livro.autor,\\n      },\\n      {\\n        \\\"@type\\\": \\\"PropertyValue\\\",\\n        name: \\\"Ano de publicação\\\",\\n        value: livro.ano_publicacao,\\n      },\\n    ],\\n    offers: ofertas?.map((o: any) => ({\\n      \\\"@type\\\": \\\"Offer\\\",\\n      price: o.preco,\\n      priceCurrency: \\\"BRL\\\",\\n      availability: \\\"https://schema.org/InStock\\\",\\n      url: `${process.env.NEXT_PUBLIC_SITE_URL}/api/click/${o.id}`,\\n      seller: {\\n        \\\"@type\\\": \\\"Organization\\\",\\n        name: o.marketplace,\\n      },\\n    })),\\n  };\\n\\n  return (\\n    <main className=\\\"max-w-3xl mx-auto px-6 py-10 space-y-10\\\">\\n\\n      {/* Schema JSON-LD */}\\n      <script\\n        type=\\\"application/ld+json\\\"\\n        dangerouslySetInnerHTML={{\\n          __html: JSON.stringify(schema),\\n        }}\\n      />\\n\\n      {/* =========================\\n          Livro\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n\\n        <h1 className=\\\"text-3xl font-bold\\\">\\n          {livro.titulo}\\n        </h1>\\n\\n        {livro.autor && (\\n          <p className=\\\"text-lg text-gray-600\\\">\\n            por {livro.autor}\\n          </p>\\n        )}\\n\\n        {/* CAPA */}\\n        {livro.imagem_url && (\\n          <img\\n            src={livro.imagem_url}\\n            alt={livro.titulo}\\n            className=\\\"w-48 rounded\\\"\\n          />\\n        )}\\n\\n        {livro.descricao && (\\n          <p className=\\\"text-gray-800 leading-relaxed\\\">\\n            {livro.descricao}\\n          </p>\\n        )}\\n\\n      </section>\\n\\n      {/* =========================\\n          Categorias\\n      ========================== */}\\n      <section className=\\\"space-y-3\\\">\\n\\n        <h2 className=\\\"text-xl font-semibold\\\">\\n          Categorias\\n        </h2>\\n\\n        {!livro.livros_categorias?.length && (\\n          <p className=\\\"text-gray-500\\\">\\n            Ainda não categorizado.\\n          </p>\\n        )}\\n\\n        <ul className=\\\"list-disc list-inside text-sm space-y-1\\\">\\n\\n          {livro.livros_categorias?.map((rel: any) => (\\n\\n            <li key={rel.categorias.slug}>\\n\\n              <a\\n                href={`/categorias/${rel.categorias.slug}`}\\n                className=\\\"text-blue-600 hover:underline\\\"\\n              >\\n                {rel.categorias.nome}\\n              </a>\\n\\n            </li>\\n\\n          ))}\\n\\n        </ul>\\n\\n      </section>\\n\\n      {/* =========================\\n          Listas relacionadas\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n\\n        <h2 className=\\\"text-2xl font-semibold\\\">\\n          Este livro aparece nas listas\\n        </h2>\\n\\n        {!listas.length && (\\n          <p className=\\\"text-gray-500\\\">\\n            Ainda não vinculado a listas editoriais.\\n          </p>\\n        )}\\n\\n        <ul className=\\\"list-disc list-inside space-y-1\\\">\\n\\n          {listas.map((lista: any) => (\\n\\n            <li key={lista.slug}>\\n              <a\\n                href={`/listas/${lista.slug}`}\\n                className=\\\"text-blue-600 hover:underline\\\"\\n              >\\n                {lista.titulo}\\n              </a>\\n            </li>\\n\\n          ))}\\n\\n        </ul>\\n\\n      </section>\\n\\n      {/* =========================\\n          Ofertas\\n      ========================== */}\\n      <section className=\\\"space-y-4\\\">\\n\\n        <h2 className=\\\"text-2xl font-semibold\\\">\\n          Onde comprar\\n        </h2>\\n\\n        {!ofertas?.length && (\\n          <p className=\\\"text-gray-500\\\">\\n            Nenhuma oferta disponível no momento.\\n          </p>\\n        )}\\n\\n        <ul className=\\\"space-y-3\\\">\\n\\n          {ofertas?.map((o: any) => (\\n\\n            <li\\n              key={o.id}\\n              className=\\\"border p-4 rounded-lg flex items-center justify-between\\\"\\n            >\\n\\n              <div>\\n                <p className=\\\"font-medium\\\">\\n                  {o.marketplace}\\n                </p>\\n\\n                <p className=\\\"text-lg font-bold\\\">\\n                  R$ {o.preco}\\n                </p>\\n              </div>\\n\\n              <a\\n                href={`/api/click/${o.id}`}\\n                target=\\\"_blank\\\"\\n                className=\\\"text-sm text-green-600 hover:underline\\\"\\n              >\\n                Ver oferta →\\n              </a>\\n\\n            </li>\\n\\n          ))}\\n\\n        </ul>\\n\\n      </section>\\n\\n    </main>\\n  );\\",
    "state\\2026-02-15_08-51_site_bootstrap_part_002.json": "n}\\n\",\n    \"app\\\\(public)\\\\ofertas\\\\data.mock.ts\": \"export const ofertasMock = [\\n  {\\n    id: 1,\\n    titulo: \\\"O Investidor Inteligente\\\",\\n    slug: \\\"o-investidor-inteligente\\\",\\n    afiliado_id: \\\"8535930321\\\",\\n    preco: 59.9,\\n    preco_original: 89.9,\\n  },\\n  {\\n    id: 2,\\n    titulo: \\\"Ação Humana\\\",\\n    slug: \\\"acao-humana\\\",\\n    afiliado_id: \\\"8593751422\\\",\\n    preco: 74.9,\\n    preco_original: null,\\n  },\\n];\\n\",\n    \"app\\\\(public)\\\\ofertas\\\\data.ts\": \"import { ofertasMock } from \\\"./data.mock\\\";\\nimport { createClient } from \\\"@supabase/supabase-js\\\";\\n\\ntype Oferta = {\\n  id: number;\\n  titulo: string;\\n  slug: string;\\n  preco: number;\\n  url_afiliada: string;\\n};\\n\\nexport async function getOfertas(): Promise<Oferta[]> {\\n  const useMock = process.env.NEXT_PUBLIC_USE_MOCK === \\\"true\\\";\\n\\n  if (useMock) {\\n    return ofertasMock;\\n  }\\n\\n  const supabase = createClient(\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\n  );\\n\\n  const { data, error } = await supabase\\n    .from(\\\"ofertas\\\")\\n    .select(`\\n      id,\\n      preco,\\n      url_afiliada,\\n      livros (\\n        titulo,\\n        slug\\n      )\\n    `)\\n    .order(\\\"id\\\", { ascending: false });\\n\\n  if (error) {\\n    throw new Error(error.message);\\n  }\\n\\n  /**\\n   * Flatten do JOIN\\n   */\\n  const parsed: Oferta[] =\\n    data?.map((o: any) => ({\\n      id: o.id,\\n      preco: o.preco,\\n      url_afiliada: o.url_afiliada,\\n      titulo: o.livros?.titulo ?? \\\"Sem título\\\",\\n      slug: o.livros?.slug ?? \\\"#\\\",\\n    })) ?? [];\\n\\n  return parsed;\\n}\\n\",\n    \"app\\\\(public)\\\\ofertas\\\\page.tsx\": \"export const runtime = \\\"edge\\\";\\n\\nimport { createClient } from \\\"@supabase/supabase-js\\\";\\n\\nexport default async function OfertasPage() {\\n  const supabase = createClient(\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\n  );\\n\\n  /**\\n   * Ofertas + Livro\\n   */\\n  const { data: ofertas } = await supabase\\n    .from(\\\"ofertas\\\")\\n    .select(`\\n      id,\\n      preco,\\n      marketplace,\\n      livros (\\n        titulo,\\n        slug,\\n        autor,\\n        imagem_url,\\n        isbn\\n      )\\n    `)\\n    .eq(\\\"ativa\\\", true);\\n\\n  const baseUrl =\\n    process.env.NEXT_PUBLIC_SITE_URL ||\\n    \\\"http://localhost:3000\\\";\\n\\n  /**\\n   * ========================