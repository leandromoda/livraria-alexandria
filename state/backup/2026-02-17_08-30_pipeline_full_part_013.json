 overflow-hidden rounded\\\\\\\">\\\\n\\\\n                {l.imagem_url ? (\\\\n                  <img\\\\n                    src={l.imagem_url}\\\\n                    alt={l.titulo}\\\\n                    className=\\\\\\\"w-full h-full object-cover\\\\\\\"\\\\n                  />\\\\n                ) : (\\\\n                  <div className=\\\\\\\"w-full h-full flex items-center justify-center text-[10px] text-gray-400\\\\\\\">\\\\n                    —\\\\n                  </div>\\\\n                )}\\\\n\\\\n              </div>\\\\n\\\\n              {/* TEXTO */}\\\\n              <div className=\\\\\\\"leading-tight\\\\\\\">\\\\n\\\\n                <p className=\\\\\\\"font-medium\\\\\\\">\\\\n                  {l.titulo}\\\\n                </p>\\\\n\\\\n                {l.autor && (\\\\n                  <p className=\\\\\\\"text-sm text-gray-500\\\\\\\">\\\\n                    {l.autor}\\\\n                  </p>\\\\n                )}\\\\n\\\\n              </div>\\\\n\\\\n            </a>\\\\n\\\\n          </li>\\\\n\\\\n        ))}\\\\n\\\\n      </ul>\\\\n\\\\n    </main>\\\\n  );\\\\n}\\\\n\\\",\\n    \\\"app\\\\\\\\(public)\\\\\\\\livros\\\\\\\\[slug]\\\\\\\\page.tsx\\\": \\\"export const runtime = \\\\\\\"edge\\\\\\\";\\\\n\\\\nimport { notFound } from \\\\\\\"next/navigation\\\\\\\";\\\\nimport { createClient } from \\\\\\\"@supabase/supabase-js\\\\\\\";\\\\n\\\\ntype PageProps = {\\\\n  params: Promise<{\\\\n    slug: string;\\\\n  }>;\\\\n};\\\\n\\\\nexport default async function LivroPage({\\\\n  params,\\\\n}: PageProps) {\\\\n  const { slug } = await params;\\\\n\\\\n  const supabase = createClient(\\\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\\\n  );\\\\n\\\\n  /**\\\\n   * Livro + Categorias\\\\n   */\\\\n  const { data: livro } = await supabase\\\\n    .from(\\\\\\\"livros\\\\\\\")\\\\n    .select(`\\\\n      *,\\\\n      livros_categorias (\\\\n        categorias (\\\\n          nom",
    "state\\backup\\2026-02-15_08-51_pipeline_full_part_006.json": "e,\\\\n          slug\\\\n        )\\\\n      )\\\\n    `)\\\\n    .eq(\\\\\\\"slug\\\\\\\", slug)\\\\n    .single();\\\\n\\\\n  if (!livro) {\\\\n    notFound();\\\\n  }\\\\n\\\\n  /**\\\\n   * Ofertas\\\\n   */\\\\n  const { data: ofertas } = await supabase\\\\n    .from(\\\\\\\"ofertas\\\\\\\")\\\\n    .select(`\\\\n      id,\\\\n      preco,\\\\n      marketplace\\\\n    `)\\\\n    .eq(\\\\\\\"livro_id\\\\\\\", livro.id)\\\\n    .eq(\\\\\\\"ativa\\\\\\\", true);\\\\n\\\\n  /**\\\\n   * Listas relacionadas\\\\n   */\\\\n  const { data: listasPivot } = await supabase\\\\n    .from(\\\\\\\"lista_livros\\\\\\\")\\\\n    .select(`\\\\n      listas (\\\\n        titulo,\\\\n        slug\\\\n      )\\\\n    `)\\\\n    .eq(\\\\\\\"livro_id\\\\\\\", livro.id);\\\\n\\\\n  const listas =\\\\n    listasPivot?.map((l: any) => l.listas) ?? [];\\\\n\\\\n  /**\\\\n   * Schema.org\\\\n   */\\\\n  const schema = {\\\\n    \\\\\\\"@context\\\\\\\": \\\\\\\"https://schema.org\\\\\\\",\\\\n    \\\\\\\"@type\\\\\\\": \\\\\\\"Product\\\\\\\",\\\\n    name: livro.titulo,\\\\n    description: livro.descricao,\\\\n    image: livro.imagem_url || undefined,\\\\n    sku: livro.isbn,\\\\n    brand: {\\\\n      \\\\\\\"@type\\\\\\\": \\\\\\\"Brand\\\\\\\",\\\\n      name: livro.autor,\\\\n    },\\\\n    additionalProperty: [\\\\n      {\\\\n        \\\\\\\"@type\\\\\\\": \\\\\\\"PropertyValue\\\\\\\",\\\\n        name: \\\\\\\"Autor\\\\\\\",\\\\n        value: livro.autor,\\\\n      },\\\\n      {\\\\n        \\\\\\\"@type\\\\\\\": \\\\\\\"PropertyValue\\\\\\\",\\\\n        name: \\\\\\\"Ano de publicação\\\\\\\",\\\\n        value: livro.ano_publicacao,\\\\n      },\\\\n    ],\\\\n    offers: ofertas?.map((o: any) => ({\\\\n      \\\\\\\"@type\\\\\\\": \\\\\\\"Offer\\\\\\\",\\\\n      price: o.preco,\\\\n      priceCurrency: \\\\\\\"BRL\\\\\\\",\\\\n      availability: \\\\\\\"https://schema.org/InStock\\\\\\\",\\\\n      url: `${process.env.NEXT_PUBLIC_SITE_URL}/api/click/${o.id}`,\\\\n      seller: {\\\\n        \\\\\\\"@type\\\\\\\": \\\\\\\"Organization\\\\\\\",\\\\n        name: o.marketplace,\\\\n      },\\\\n    })),\\\\n  };\\\\n\\\\n  return (\\\\n    <main className=\\\\\\\"max-w-3xl mx-auto px-6 py-10 space-y-10\\\\\\\">\\\\n\\\\n      {/* Schema JSON-LD */}\\\\n      <script\\\\n        type=\\\\\\\"application/ld+json\\\\\\\"\\\\n        dangerouslySetInnerHTML={{\\\\n          __html: JSON.stringify(schema),\\\\n        }}\\\\n      />\\\\n\\\\n      {/* =========================\\\\n          Livro\\\\n      ========================== */}\\\\n      <section className=\\\\\\\"space-y-4\\\\\\\">\\\\n\\\\n        <h1 className=\\\\\\\"text-3xl font-bold\\\\\\\">\\\\n          {livro.titulo}\\\\n        </h1>\\\\n\\\\n        {livro.autor && (\\\\n          <p className=\\\\\\\"text-lg text-gray-600\\\\\\\">\\\\n            por {livro.autor}\\\\n          </p>\\\\n        )}\\\\n\\\\n        {/* CAPA */}\\\\n        {livro.imagem_url && (\\\\n          <img\\\\n            src={livro.imagem_url}\\\\n            alt={livro.titulo}\\\\n            className=\\\\\\\"w-48 rounded\\\\\\\"\\\\n          />\\\\n        )}\\\\n\\\\n        {livro.descricao && (\\\\n          <p className=\\\\\\\"text-gray-800 leading-relaxed\\\\\\\">\\\\n            {livro.descricao}\\\\n          </p>\\\\n        )}\\\\n\\\\n      </section>\\\\n\\\\n      {/* =========================\\\\n          Categorias\\\\n      ========================== */}\\\\n      <section className=\\\\\\\"space-y-3\\\\\\\">\\\\n\\\\n        <h2 className=\\\\\\\"text-xl font-semibold\\\\\\\">\\\\n          Categorias\\\\n        </h2>\\\\n\\\\n        {!livro.livros_categorias?.length && (\\\\n          <p className=\\\\\\\"text-gray-500\\\\\\\">\\\\n            Ainda não categorizado.\\\\n          </p>\\\\n        )}\\\\n\\\\n        <ul className=\\\\\\\"list-disc list-inside text-sm space-y-1\\\\\\\">\\\\n\\\\n          {livro.livros_categorias?.map((rel: any) => (\\\\n\\\\n            <li key={rel.categorias.slug}>\\\\n\\\\n              <a\\\\n                href={`/categorias/${rel.categorias.slug}`}\\\\n                className=\\\\\\\"text-blue-600 hover:underline\\\\\\\"\\\\n              >\\\\n                {rel.categorias.nome}\\\\n              </a>\\\\n\\\\n            </li>\\\\n\\\\n          ))}\\\\n\\\\n        </ul>\\\\n\\\\n      </section>\\\\n\\\\n      {/* =========================\\\\n          Listas relacionadas\\\\n      ========================== */}\\\\n      <section className=\\\\\\\"space-y-4\\\\\\\">\\\\n\\\\n        <h2 className=\\\\\\\"text-2xl font-semibold\\\\\\\">\\\\n          Este livro aparece nas listas\\\\n        </h2>\\\\n\\\\n        {!listas.length && (\\\\n          <p className=\\\\\\\"text-gray-500\\\\\\\">\\\\n            Ainda não vinculado a listas editoriais.\\\\n          </p>\\\\n        )}\\\\n\\\\n        <ul className=\\\\\\\"list-disc list-inside space-y-1\\\\\\\">\\\\n\\\\n          {listas.map((lista: any) => (\\\\n\\\\n            <li key={lista.slug}>\\\\n              <a\\\\n                href={`/listas/${lista.slug}`}\\\\n                className=\\\\\\\"text-blue-600 hover:underline\\\\\\\"\\\\n              >\\\\n                {lista.titulo}\\\\n              </a>\\\\n            </li>\\\\n\\\\n          ))}\\\\n\\\\n        </ul>\\\\n\\\\n      </section>\\\\n\\\\n      {/* =========================\\\\n          Ofertas\\\\n      ========================== */}\\\\n      <section className=\\\\\\\"space-y-4\\\\\\\">\\\\n\\\\n        <h2 className=\\\\\\\"text-2xl font-semibold\\\\\\\">\\\\n          Onde comprar\\\\n        </h2>\\\\n\\\\n        {!ofertas?.length && (\\\\n          <p className=\\\\\\\"text-gray-500\\\\\\\">\\\\n            Nenhuma oferta disponível no momento.\\\\n          </p>\\\\n        )}\\\\n\\\\n        <ul className=\\\\\\\"space-y-3\\\\\\\">\\\\n\\\\n          {ofertas?.map((o: any) => (\\\\n\\\\n            <li\\\\n              key={o.id}\\\\n              className=\\\\\\\"border p-4 rounded-lg flex items-center justify-between\\\\\\\"\\\\n            >\\\\n\\\\n              <div>\\\\n                <p className=\\\\\\\"font-medium\\\\\\\">\\\\n                  {o.marketplace}\\\\n                </p>\\\\n\\\\n                <p className=\\\\\\\"text-lg font-bold\\\\\\\">\\\\n                  R$ {o.preco}\\\\n                </p>\\\\n              </div>\\\\n\\\\n              <a\\\\n                href={`/api/click/${o.id}`}\\\\n                target=\\\\\\\"_blank\\\\\\\"\\\\n                className=\\\\\\\"text-sm text-green-600 hover:underline\\\\\\\"\\\\n              >\\\\n                Ver oferta →\\\\n              </a>\\\\n\\\\n            </li>\\\\n\\\\n          ))}\\\\n\\\\n        </ul>\\\\n\\\\n      </section>\\\\n\\\\n    </main>\\\\n  );\\\\n}\\\\n\\\",\\n    \\\"app\\\\\\\\(public)\\\\\\\\ofertas\\\\\\\\data.mock.ts\\\": \\\"export const ofertasMock = [\\\\n  {\\\\n    id: 1,\\\\n    titulo: \\\\\\\"O Investidor Inteligente\\\\\\\",\\\\n    slug: \\\\\\\"o-investidor-inteligente\\\\\\\",\\\\n    afiliado_id: \\\\\\\"8535930321\\\\\\\",\\\\n    preco: 59.9,\\\\n    preco_original: 89.9,\\\\n  },\\\\n  {\\\\n    id: 2,\\\\n    titulo: \\\\\\\"Ação Humana\\\\\\\",\\\\n    slug: \\\\\\\"acao-humana\\\\\\\",\\\\n    afiliado_id: \\\\\\\"8593751422\\\\\\\",\\\\n    preco: 74.9,\\\\n    preco_original: null,\\\\n  },\\\\n];\\\\n\\\",\\n    \\\"app\\\\\\\\(public)\\\\\\\\ofertas\\\\\\\\data.ts\\\": \\\"import { ofertasMock } from \\\\\\\"./data.mock\\\\\\\";\\\\nimport { createClient } from \\\\\\\"@supabase/supabase-js\\\\\\\";\\\\n\\\\ntype Oferta = {\\\\n  id: number;\\\\n  titulo: string;\\\\n  slug: string;\\\\n  preco: number;\\\\n  url_afiliada: string;\\\\n};\\\\n\\\\nexport async function getOfertas(): Promise<Oferta[]> {\\\\n  const useMock = process.env.NEXT_PUBLIC_USE_MOCK === \\\\\\\"true\\\\\\\";\\\\n\\\\n  if (useMock) {\\\\n    return ofertasMock;\\\\n  }\\\\n\\\\n  const supabase = createClient(\\\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\\\n  );\\\\n\\\\n  const { data, error } = await supabase\\\\n    .from(\\\\\\\"ofertas\\\\\\\")\\\\n    .select(`\\\\n      id,\\\\n      preco,\\\\n      url_afiliada,\\\\n      livros (\\\\n        titulo,\\\\n        slug\\\\n      )\\\\n    `)\\\\n    .order(\\\\\\\"id\\\\\\\", { ascending: false });\\\\n\\\\n  if (error) {\\\\n    throw new Error(error.message);\\\\n  }\\\\n\\\\n  /**\\\\n   * Flatten do JOIN\\\\n   */\\\\n  const parsed: Oferta[] =\\\\n    data?.map((o: any) => ({\\\\n      id: o.id,\\\\n      preco: o.preco,\\\\n      url_afiliada: o.url_afiliada,\\\\n      titulo: o.livros?.titulo ?? \\\\\\\"Sem título\\\\\\\",\\\\n      slug: o.livros?.slug ?? \\\\\\\"#\\\\\\\",\\\\n    })) ?? [];\\\\n\\\\n  return parsed;\\\\n}\\\\n\\\",\\n    \\\"app\\\\\\\\(public)\\\\\\\\ofertas\\\\\\\\page.tsx\\\": \\\"export const runtime = \\\\\\\"edge\\\\\\\";\\\\n\\\\nimport { createClient } from \\\\\\\"@supabase/supabase-js\\\\\\\";\\\\n\\\\nexport default async function OfertasPage() {\\\\n  const supabase = createClient(\\\\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\\\\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\\\\n  );\\\\n\\\\n  /**\\\\n   * Ofertas + Livro\\\\n   */\\\\n  const { data: ofertas } = await supabase\\\\n    .from(\\\\\\\"ofertas\\\\\\\")\\\\n    .select(`\\\\n      id,\\\\n      preco,\\\\n      marketplace,\\\\n      livros (\\\\n        titulo,\\\\n        slug,\\\\n        autor,\\\\n        imagem_url,\\\\n        isbn\\\\n      )\\\\n    `)\\\\n    .eq(\\\\\\\"ativa\\\\\\\", true);\\\\n\\\\n  const baseUrl =\\\\n    process.env.NEXT_PUBLIC_SITE_URL ||\\\\n    \\\\\\\"http://localhost:3000\\\\\\\";\\\\n\\\\n  /**\\\\n   * =========================\\\\n   * Schema.org\\\\n   * =========================\\\\n   */\\\\n  const schema = {\\\\n    \\\\\\\"@context\\\\\\\": \\\\\\\"https://schema.org\\\\\\\",\\\\n    \\\\\\\"@type\\\\\\\": \\\\\\\"ItemList\\\\\\\",\\\\n    name: \\\\\\\"Ofertas de livros\\\\\\\",\\\\n    itemListElement: ofertas?.map(\\\\n      (o: any, index: number) => ({\\\\n        \\\\\\\"@type\\\\\\\": \\\\\\\"ListItem\\\\\\\",\\\\n        position: index + 1,\\\\n        item: {\\\\n          \\\\\\\"@type\\\\\\\": \\\\\\\"Product\\\\\\\",\\\\n          name: o.livros.titulo,\\\\n          image:\\\\n            o.livros.imagem_url || undefined,\\\\n          sku: o.livros.isbn,\\\\n          brand: {\\\\n            \\\\\\\"@type\\\\\\\": \\\\\\\"Brand\\\\\\\",\\\\n            name: o.livros.autor,\\\\n          },\\\\n          offers: {\\\\n            \\\\\\\"@type\\\\\\\": \\\\\\\"Offer\\\\\\\",\\\\n            price: o.preco,\\\\n            priceCurrency: \\\\\\\"BRL\\\\\\\",\\\\n            availability:\\\\n              \\\\\\\"https://schema.org/InStock\\\\\\\",\\\\n            url: `${baseUrl}/api/click/${o.id}`,\\\\n            seller: {\\\\n              \\\\\\\"@type\\\\\\\": \\\\\\\"Organization\\\\\\\",\\\\n              name: o.marketplace,\\\\n            },\\\\n          },\\\\n        },\\\\n      })\\\\n    ),\\\\n  };\\\\n\\\\n  return (\\\\n    <main className=\\\\\\\"max-w-3xl mx-auto px-6 py-10 space-y-6\\\\\\\">\\\\n      {/* Schema */}\\\\n      <script\\\\n        type=\\\\\\\"application/ld+json\\\\\\\"\\\\n        dangerouslySetInnerHTML={{\\\\n          __html: JSON.stringify(schema),\\\\n        }}\\\\n      />\\\\n\\\\n      <h1 className=\\\\\\\"text-3xl font-bold\\\\\\\">\\\\n        Ofertas de Livros\\\\n      </h1>\\\\n\\\\n      <ul className=\\\\\\\"space-y-4\\\\\\\">\\\\n        {ofertas?.map((o: any) => (\\\\n          <li\\\\n            key={o.id}\\\\n            className=\\\\\\\"border p-4 rounded-lg\\\\\\\"\\\\n          >\\\\n            <a\\\\n              href={`/livros/${o.livros.slug}`}\\\\n              className=\\\\\\\"text-lg font-semibold text-blue-600 hover:underline block\\\\\\\"\\\\n            >\\\\n              {o.livros.titulo}\\\\n            </a>\\\\n\\\\n            <p className=\\\\\\\"text-gray-700\\\\\\\">\\\\n              R$ {o.preco}\\\\n            </p>\\\\n\\\\n            <a\\\\n              href={`/api/click/${o.id}`}\\\\n              target=\\\\\\\"_blank\\\\\\\"\\\\n              className=\\\\\\\"text-sm text-green-600 hover:underline\\\\\\\"\\\\n            >\\\\n              Ver oferta →\\\\n            </a>\\\\n          </li>\\\\n        ))}\\\\n      </ul>\\\\n    </main>\\\\n  );\\\\n}\\\",\\n    \\\"app\\\\\\\\teste\\\\\\\\[id]\\\\\\\\page.tsx\\\": \\\"export default function Teste({ params }: any) {\\\\n  return (\\\\n    <div style={{ padding: 40 }}>\\\\n      ID: {params?.id}\\\\n    </div>\\\\n  );\\\\n}\\\\n\\\",\\n    \\\"lib\\\\\\\\supabase-admin.ts\\\": \\\"import { createClient } from \\\\\\\"@supabase/supabase-js\\\\\\\";\\\\n\\\\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\\\\nconst serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;\\\\n\\\\nexport const supabaseAdmin = createClient(\\\\n  supabaseUrl,\\\\n  serviceRoleKey,\\\\n  {\\\\n    auth: {\\\\n      persistSession: false\\\\n    }\\\\n  }\\\\n);\\\\n\\\",\\n    \\\"lib\\\\\\\\supabase.ts\\\": \\\"import { createClient } from \\\\\\\"@supabase/supabase-js\\\\\\\";\\\\n\\\\nconst supabaseUrl =\\\\n  process.env.SUPABASE_URL ??\\\\n  process.env.NEXT_PUBLIC_SUPABASE_URL;\\\\n\\\\nconst supabaseAnonKey =\\\\n  process.env.SUPABASE_ANON_KEY ??\\\\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\\\\n\\\\nif (!supabaseUrl) {\\\\n  throw new Error(\\\\\\\"supabaseUrl is required.\\\\\\\");\\\\n}\\\\n\\\\nif (!supabaseAnonKey) {\\\\n  throw new Error(\\\\\\\"supabaseAnonKey is required.\\\\\\\");\\\\n}\\\\n\\\\nexport const supabase = createClient(\\\\n  supabaseUrl,\\\\n  supabaseAnonKey\\\\n);\\\",\\n    \\\"lib\\\\\\\\supabase\\\\\\\\edge.ts\\\": \\\"import { createClient } from \\\\\\\"@supabase/supabase-js\\\\\\\";\\\\n\\\\nexport const supabaseEdge = createClient(\\\\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\\\\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\\\\n  {\\\\n    auth: {\\\\n      persistSession: false,\\\\n    },\\\\n  }\\\\n);\\\"\\n  }\\n}\",\n    \"state\\\\db_state.json\": \"{\\n  \\\"database\\\": {\\n    \\\"name\\\": \\\"books.db\\\",\\n    \\\"path\\\": \\\"scripts/data/books.db\\\",\\n    \\\"engine\\\": \\\"SQLite\\\",\\n    \\\"purpose\\\": \\\"Staging local para ingest, enriquecimento, revisão e preparação antes de publicação no Supabase\\\",\\n    \\\"resume_capability\\\": true,\\n    \\\"created_at_strategy\\\": \\\"pipeline_timestamp\\\",\\n    \\\"updated_at_strategy\\\": \\\"pipeline_timestamp\\\",\\n    \\\"uuid_strategy\\\": \\\"hex_24_non_uuid\\\",\\n    \\\"publish_blocker\\\": \\\"uuid_format_mismatch\\\"\\n  },\\n\\n  \\\"tables\\\": [\\n    {\\n      \\\"name\\\": \\\"livros\\\",\\n      \\\"description\\\": \\\"Tabela central de staging com dados consolidados dos livros\\\",\\n      \\\"primary_key\\\": \\\"id\\\",\\n      \\\"fields\\\": [\\n        {\\n          \\\"name\\\": \\\"id\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"nullable\\\": false,\\n          \\\"description\\\": \\\"Pseudo-UUID hexadecimal 24 chars (não compatível com UUID Supabase)\\\"\\n        },\\n        {\\n          \\\"name\\\": \\\"titulo\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"nullable\\\": false\\n        },\\n        {\\n          \\\"name\\\": \\\"slug\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"nullable\\\": true,\\n          \\\"unique\\\": true\\n        },\\n        {\\n          \\\"name\\\": \\\"autor\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"nullable\\\": true\\n        },\\n        {\\n          \\\"name\\\": \\\"descricao\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"nullable\\\": true,\\n          \\\"description\\\": \\\"Sinopse gerada + revisada (overwrite no review step)\\\"\\n        },\\n        {\\n          \\\"name\\\": \\\"isbn\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"nullable\\\": true,\\n          \\\"index\\\": true\\n        },\\n        {\\n          \\\"name\\\": \\\"ano_publicacao\\\",\\n          \\\"type\\\": \\\"INTEGER\\\",\\n          \\\"nullable\\\": true\\n        },\\n        {\\n          \\\"name\\\": \\\"imagem_url\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"nullable\\\": true\\n        },\\n        {\\n          \\\"name\\\": \\\"idioma\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"nullable\\\": true\\n        },\\n        {\\n          \\\"name\\\": \\\"cluster\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"nullable\\\": true\\n        },\\n        {\\n          \\\"name\\\": \\\"fonte\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"nullable\\\": true\\n        },\\n        {\\n          \\\"name\\\": \\\"status_slug\\\",\\n          \\\"type\\\": \\\"INTEGER\\\",\\n          \\\"default\\\": 0,\\n          \\\"description\\\": \\\"0 pendente | 1 gerado\\\"\\n        },\\n        {\\n          \\\"name\\\": \\\"status_dedup\\\",\\n          \\\"type\\\": \\\"INTEGER\\\",\\n          \\\"default\\\": 0\\n        },\\n        {\\n          \\\"name\\\": \\\"status_synopsis\\\",\\n          \\\"type\\\": \\\"INTEGER\\\",\\n          \\\"default\\\": 0\\n        },\\n        {\\n          \\\"name\\\": \\\"status_review\\\",\\n          \\\"type\\\": \\\"INTEGER\\\",\\n          \\\"default\\\": 0\\n        },\\n        {\\n          \\\"name\\\": \\\"status_cover\\\",\\n          \\\"type\\\": \\\"INTEGER\\\",\\n          \\\"default\\\": 0\\n        },\\n        {\\n          \\\"name\\\": \\\"status_publish\\\",\\n          \\\"type\\\": \\\"INTEGER\\\",\\n          \\\"default\\\": 0\\n        },\\n        {\\n          \\\"name\\\": \\\"created_at\\\",\\n          \\\"type\\\": \\\"DATETIME\\\",\\n          \\\"nullable\\\": true\\n        },\\n        {\\n          \\\"name\\\": \\\"updated_at\\\",\\n          \\\"type\\\": \\\"DATETIME\\\",\\n          \\\"nullable\\\": true\\n        }\\n      ]\\n    },\\n\\n    {\\n      \\\"name\\\": \\\"dedup_log\\\",\\n      \\\"description\\\": \\\"Registro de duplicidades detectadas\\\",\\n      \\\"primary_key\\\": \\\"id\\\",\\n      \\\"fields\\\": [\\n        { \\\"name\\\": \\\"id\\\", \\\"type\\\": \\\"TEXT\\\" },\\n        { \\\"name\\\": \\\"livro_id_origem\\\", \\\"type\\\": \\\"TEXT\\\" },\\n        { \\\"name\\\": \\\"livro_id_duplicado\\\", \\\"type\\\": \\\"TEXT\\\" },\\n        {\\n          \\\"name\\\": \\\"criterio\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"description\\\": \\\"slug | isbn | titulo_similar\\\"\\n        },\\n        {\\n          \\\"name\\\": \\\"acao\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"description\\\": \\\"removido | mesclado | ignorado\\\"\\n        },\\n        {\\n          \\\"name\\\": \\\"created_at\\\",\\n          \\\"type\\\": \\\"DATETIME\\\"\\n        }\\n      ]\\n    },\\n\\n    {\\n      \\\"name\\\": \\\"ingest_runs\\\",\\n      \\\"description\\\": \\\"Histórico de execuções de prospecção\\\",\\n      \\\"primary_key\\\": \\\"id\\\",\\n      \\\"fields\\\": [\\n        { \\\"name\\\": \\\"id\\\", \\\"type\\\": \\\"TEXT\\\" },\\n        { \\\"name\\\": \\\"idioma\\\", \\\"type\\\": \\\"TEXT\\\" },\\n        { \\\"name\\\": \\\"pacote\\\", \\\"type\\\": \\\"INTEGER\\\" },\\n        {\\n          \\\"name\\\": \\\"clusters_usados\\\",\\n          \\\"type\\\": \\\"TEXT\\\",\\n          \\\"description\\\": \\\"JSON string\\\"\\n        },\\n        { \\\"name\\\": \\\"inseridos\\\", \\\"type\\\": \\\"INTEGER\\\" },\\n        { \\\"name\\\": \\\"skips\\\", \\\"type\\\": \\\"INTEGER\\\" },\\n        { \\\"name\\\": \\\"created_at\\\", \\\"type\\\": \\\"DATETIME\\\" }\\n      ]\\n    },\\n\\n    {\\n      \\\"name\\\": \\\"pipeline_state\\\",\\n      \\\"description\\\": \\\"Estado global resumível do pipeline\\\",\\n      \\\"primary_key\\\": \\\"key\\\",\\n      \\\"fields\\\": [\\n        { \\\"name\\\": \\\"key\\\", \\\"type\\\": \\\"TEXT\\\" },\\n        { \\\"name\\\": \\\"value\\\", \\\"type\\\": \\\"TEXT\\\" },\\n        { \\\"name\\\": \\\"updated_at\\\", \\\"type\\\": \\\"DATETIME\\\" }\\n      ],\\n      \\\"examples\\\": [\\n        {\\n          \\\"key\\\": \\\"last_cluster_index\\\",\\n          \\\"value\\\": \\\"12\\\"\\n        },\\n        {\\n          \\\"key\\\": \\\"last_run_id\\\",\\n          \\\"value\\\": \\\"uuid\\\"\\n        }\\n      ]\\n    }\\n  ],\\n\\n  \\\"indexes\\\": [\\n    {\\n      \\\"table\\\": \\\"livros\\\",\\n      \\\"fields\\\": [\\\"slug\\\"],\\n      \\\"unique\\\": true\\n    },\\n    {\\n      \\\"table\\\": \\\"livros\\\",\\n      \\\"fields\\\": [\\\"isbn\\\"]\\n    },\\n    {\\n      \\\"table\\\": \\\"livros\\\",\\n      \\\"fields\\\": [\\\"cluster\\\"]\\n    },\\n    {\\n      \\\"table\\\": \\\"livros\\\",\\n      \\\"fields\\\": [\\\"status_publish\\\"]\\n    }\\n  ],\\n\\n  \\\"relationships\\\": [],\\n\\n  \\\"publish_layer\\\": {\\n    \\\"target\\\": \\\"Supabase.livros\\\",\\n    \\\"mode\\\": \\\"REST upsert\\\",\\n    \\\"status\\\": \\\"blocked\\\",\\n    \\\"blocking_issue\\\": \\\"invalid input syntax for type uuid\\\",\\n    \\\"root_cause\\\": \\\"staging IDs não seguem UUID v4\\\",\\n    \\\"resolution_path\\\": [\\n      \\\"Gerar UUID v4 no publish\\\",\\n      \\\"Ou migrar staging IDs\\\",\\n      \\\"Ou alterar schema Supabase para TEXT\\\"\\n    ]\\n  },\\n\\n  \\\"data_flow\\\": [\\n    \\\"prospect → livros (insert)\\\",\\n    \\\"slugify → livros.slug\\\",\\n    \\\"dedup → dedup_log + status_dedup\\\",\\n    \\\"synopsis → livros.descricao\\\",\\n    \\\"review → overwrite descricao\\\",\\n    \\\"cover → livros.imagem_url\\\",\\n    \\\"publish → status_publish = 1\\\"\\n  ]\\n}\\n\",\n    \"state\\\\project_state.json\": \"{\\n  \\\"meta\\\": {\\n    \\\"project_name\\\": \\\"Livraria Alexandria\\\",\\n    \\\"description\\\": \\\"Plataforma de livraria afiliada baseada em SEO programático, listas de decisão e páginas de livros, com monetização via redirecionamento afiliado.\\\",\\n    \\\"current_phase\\\": \\\"pilot_functional_interlinked_taxonomy_active\\\",\\n    \\\"last_updated\\\": \\\"2026-02-14\\\",\\n    \\\"owner\\\": \\\"Leandro Moda\\\",\\n    \\\"environment\\\": \\\"local\\\",\\n    \\\"runtime_stack\\\": {\\n      \\\"node\\\": \\\"Next.js App Router (Edge Runtime ativo)\\\",\\n      \\\"database_primary\\\": \\\"Supabase\\\",\\n      \\\"database_staging\\\": \\\"SQLite (pipeline local)\\\",\\n      \\\"llm_local\\\": \\\"Ollama\\\",\\n      \\\"llm_model\\\": \\\"phi3:mini\\\",\\n      \\\"python_env\\\": \\\"venv (Windows)\\\",\\n      \\\"ingest_language\\\": \\\"Python 3.14\\\"\\n    }\\n  },\\n\\n  \\\"objectives\\\": {\\